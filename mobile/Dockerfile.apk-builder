# Docker image to build Android APK for the Flutter mobile app
# Note: this image is for CI/build only; it does not run the app.

FROM ghcr.io/cirruslabs/flutter:stable-3.24.3-android AS build

WORKDIR /app

# Copy Flutter project
COPY . .

# Pre-download dependencies
RUN flutter pub get

# Build release APK
RUN flutter build apk --release

# Artifacts will be in /app/build/app/outputs/flutter-apk
# In CI, copy them out using `docker cp` or bind mounts.
